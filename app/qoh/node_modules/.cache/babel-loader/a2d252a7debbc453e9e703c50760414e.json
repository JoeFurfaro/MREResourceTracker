{"ast":null,"code":"import _slicedToArray from\"C:/Users/joe/w29alerts/app/qoh/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.scss';import'bootstrap/dist/css/bootstrap.min.css';import{Container}from\"react-bootstrap\";import React,{useState,useEffect}from\"react\";import{testData}from\"./data\";import mreLogo from\"./mre.png\";import axios from\"axios\";import warningImg from\"./warning.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TextPair=function TextPair(_ref){var top=_ref.top,bottom=_ref.bottom;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mt-0 mb-0\",children:top}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-0 mb-0\",children:/*#__PURE__*/_jsx(\"b\",{children:bottom})})]});};var Loading=function Loading(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),dots=_useState2[0],setDots=_useState2[1];useEffect(function(){var interval=setInterval(function(){setDots(function(curDots){return curDots.length===5?\".\":curDots+\".\";});},350);return function(){return clearInterval(interval);};},[]);return/*#__PURE__*/_jsxs(\"h1\",{className:\"loading-text\",children:[\"Loading recent data\",dots]});};export var App=function App(){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),parts=_useState4[0],setParts=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),err=_useState6[0],setErr=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),lastRefresh=_useState10[0],setLastRefresh=_useState10[1];var args=window.location.href.split(\"/\");var resource=args.length===0||args[0]===\"\"?null:args[args.length-1];useEffect(function(){refresh();var interval=setInterval(function(){refresh();},60*3000);return function(){return clearInterval(interval);};},[]);if(resource===null||resource===\"\"){return/*#__PURE__*/_jsx(\"h1\",{children:\"Please specify a resource!\"});}var refresh=function refresh(){var dev=false;var url=dev?\"http://localhost:9009/\":\"/\";axios.get(url+\"tracker/\"+resource).then(function(res){setParts(res.data);setLoading(false);setErr(false);setLastRefresh(new Date());}).catch(function(err){setErr(true);setLoading(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cell-label\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"cell-label-image\",src:mreLogo}),/*#__PURE__*/_jsxs(\"h1\",{className:\"cell-label-text\",children:[\"Resource: \",/*#__PURE__*/_jsx(\"b\",{children:resource})]})]}),/*#__PURE__*/_jsxs(Container,{fluid:true,children:[!err?null:/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0 error-text\",children:[/*#__PURE__*/_jsx(\"img\",{src:warningImg,className:\"warning-icon\"}),/*#__PURE__*/_jsx(\"b\",{children:\"Warning: Unable to refresh data. This data may not reflect recent changes.\"}),\" \",lastRefresh===null?null:\"Last successful refresh: \"+lastRefresh.toLocaleString()]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-10 mx-auto\",children:parts.map(function(part){var quants=part.Quants.slice(0,7);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 part-header-info pt-2 pb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsx(TextPair,{top:\"Part #\",bottom:part.PartNo})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(TextPair,{top:\"Description\",bottom:part.Description})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsx(TextPair,{top:\"Quantity on Hand (QOH)\",bottom:part.QOH})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"eigth-row mt-2 row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"eigth projected-title pt-2 pb-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 mt-1\",children:\"End of Day QOH\"})}),quants.map(function(q){return/*#__PURE__*/_jsx(\"div\",{className:\"eigth projected-qoh pt-2 pb-2 \"+(q.MinQOH===null?\"no-change\":q.MinQOH>0?\"good\":\"bad\"),children:/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 white-text\",children:/*#__PURE__*/_jsx(\"b\",{children:q.MinQOH===null?\"No Change\":q.MinQOH})})});})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"eigth-row mt-2 row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"eigth\"}),quants.map(function(q){var d=new Date(q.Date);var dayNames=[\"Sun\",\"Mon\",\"Tues\",\"Wed\",\"Thurs\",\"Fri\",\"Sat\"];var months=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"June\",\"July\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];var weekDay=dayNames[d.getDay()];var month=months[d.getMonth()];var dayOfMonth=d.getUTCDate();return/*#__PURE__*/_jsx(\"div\",{className:\"eigth qoh-date pb-2\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0 text-center\",children:[/*#__PURE__*/_jsx(\"b\",{children:weekDay}),\"\\xA0\",dayOfMonth,\"\\xA0\",month]})});})]})]});})}),!loading?null:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center\",children:/*#__PURE__*/_jsx(Loading,{})})})]})]})]});};","map":{"version":3,"names":["Container","React","useState","useEffect","testData","mreLogo","axios","warningImg","TextPair","top","bottom","Loading","dots","setDots","interval","setInterval","curDots","length","clearInterval","App","parts","setParts","err","setErr","loading","setLoading","lastRefresh","setLastRefresh","args","window","location","href","split","resource","refresh","dev","url","get","then","res","data","Date","catch","toLocaleString","map","part","quants","Quants","slice","PartNo","Description","QOH","q","MinQOH","d","dayNames","months","weekDay","getDay","month","getMonth","dayOfMonth","getUTCDate"],"sources":["C:/Users/joe/w29alerts/app/qoh/src/App.jsx"],"sourcesContent":["import './App.scss';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Container} from \"react-bootstrap\";\nimport React, {useState, useEffect} from \"react\";\nimport {testData} from \"./data\";\nimport mreLogo from \"./mre.png\";\nimport axios from \"axios\";\nimport warningImg from \"./warning.png\";\n\nconst TextPair = ({top, bottom}) => {\n  return (\n    <>\n      <p className=\"mt-0 mb-0\">\n        {top}\n      </p>\n      <p className=\"mt-0 mb-0\">\n        <b>\n          {bottom}\n        </b>\n      </p>\n    </>\n  );\n}\n\nconst Loading = () => {\n\n  const [dots, setDots] = useState(\"\");\n\n  useEffect(() => {\n    let interval = setInterval(() => {\n      setDots((curDots) => curDots.length === 5 ? \".\" : curDots + \".\");\n    }, 350);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <h1 className=\"loading-text\">Loading recent data{dots}</h1>\n  );\n}\n\nexport const App = () => {\n\n  const [parts, setParts] = useState([]);\n  const [err, setErr] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [lastRefresh, setLastRefresh] = useState(null);\n\n  let args = window.location.href.split(\"/\");\n  let resource = args.length === 0 || args[0] === \"\" ? null : args[args.length - 1];\n\n  useEffect(() => {\n    refresh();\n\n    let interval = setInterval(() => {\n      refresh();\n    }, 60*3000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n\n  if(resource === null || resource === \"\") { \n    return <h1>Please specify a resource!</h1>\n  }\n  const refresh = () => {\n    let dev = false;\n    let url = dev ? \"http://localhost:9009/\" : \"/\"; \n    axios.get(url + \"tracker/\" + resource).then((res) => {\n        setParts(res.data);\n        setLoading(false);\n        setErr(false);\n        setLastRefresh(new Date());\n    }).catch((err) => {\n        setErr(true);\n        setLoading(false);\n    });\n  }\n\n  return (\n    <div className=\"App\">\n        <div className=\"cell-label\">\n          <img className=\"cell-label-image\" src={mreLogo} />\n          <h1 className=\"cell-label-text\">Resource: <b>{resource}</b></h1>\n        </div>\n\n        <Container fluid>\n          {!err ? null : (\n            <div className=\"error\">\n              <p className=\"mb-0 error-text\"><img src={warningImg} className=\"warning-icon\" /><b>Warning: Unable to refresh data. This data may not reflect recent changes.</b> {lastRefresh === null ? null : \"Last successful refresh: \" + lastRefresh.toLocaleString()}</p>\n            </div>\n          )}\n          <div className=\"row mt-4\">\n            <div className=\"col-10 mx-auto\">\n              {parts.map((part) => {\n\n                let quants = part.Quants.slice(0, 7);\n\n                return (\n                  <>\n                    <div className=\"row mt-4\">\n                      <div className=\"col-12 part-header-info pt-2 pb-2\">\n                        <div className=\"row\">\n                          <div className=\"col-3\">\n                            <TextPair top=\"Part #\" bottom={part.PartNo} />\n                          </div>\n                          <div className=\"col-6\">\n                            <TextPair top=\"Description\" bottom={part.Description} />\n                          </div>\n                          <div className=\"col-3\">\n                            <TextPair top=\"Quantity on Hand (QOH)\" bottom={part.QOH} />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"eigth-row mt-2 row\">\n                      <div className=\"eigth projected-title pt-2 pb-2\">\n                          <p className=\"mb-0 mt-1\">End of Day QOH</p>\n                      </div>\n                      {quants.map((q) => {\n                          return (\n                              <div className={\"eigth projected-qoh pt-2 pb-2 \" + (q.MinQOH === null ? \"no-change\" : (q.MinQOH > 0 ? \"good\" : \"bad\"))}>\n                                  <p className=\"mb-0 white-text\"><b>{q.MinQOH === null ? \"No Change\" : q.MinQOH}</b></p>\n                              </div>\n                          );\n                      })}\n                    </div>\n                    <div className=\"eigth-row mt-2 row\">\n                      <div className=\"eigth\"></div>\n                      {quants.map((q) => {\n                        let d = new Date(q.Date);\n                        const dayNames = [\"Sun\", \"Mon\", \"Tues\", \"Wed\", \"Thurs\", \"Fri\", \"Sat\"];\n                        const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"June\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n                        const weekDay = dayNames[d.getDay()];\n                        const month = months[d.getMonth()];\n                        const dayOfMonth = d.getUTCDate();\n\n                          return (\n                              <div className={\"eigth qoh-date pb-2\"}>\n                                  <p className=\"mb-0 text-center\"><b>{weekDay}</b>&nbsp;{dayOfMonth}&nbsp;{month}</p>\n                              </div>\n                          );\n                      })}\n                    </div>\n                  </>\n                );\n              })}\n            </div>\n            {\n              !loading ? null : (\n                <div className=\"row mt-5\">\n                    <div className=\"col-12 text-center\">\n                      <Loading />\n                    </div>\n                </div>\n              )\n            }\n          </div>\n        </Container>\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}