{"ast":null,"code":"import _slicedToArray from\"C:/Users/joe/resourcetrack/MREResourceTracker/app/qoh/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.scss';import'bootstrap/dist/css/bootstrap.min.css';import{Container}from\"react-bootstrap\";import React,{useState,useEffect}from\"react\";import{testData}from\"./data\";import mreLogo from\"./mre.png\";import axios from\"axios\";import warningImg from\"./warning.png\";import fe_light from\"./fe_light.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TextPair=function TextPair(_ref){var top=_ref.top,bottom=_ref.bottom;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mt-0 mb-0\",children:top}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-0 mb-0\",children:/*#__PURE__*/_jsx(\"b\",{children:bottom})})]});};var Loading=function Loading(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),dots=_useState2[0],setDots=_useState2[1];useEffect(function(){var interval=setInterval(function(){setDots(function(curDots){return curDots.length===5?\".\":curDots+\".\";});},350);return function(){return clearInterval(interval);};},[]);return/*#__PURE__*/_jsxs(\"h1\",{className:\"loading-text\",children:[\"Loading recent data\",dots]});};export var App=function App(){document.title=\"Martinrea Resource Tracker\";var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),parts=_useState4[0],setParts=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),err=_useState6[0],setErr=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),lastRefresh=_useState10[0],setLastRefresh=_useState10[1];var args=window.location.href.split(\"/\");var resource=args.length===0||args[0]===\"\"?null:args[args.length-1];useEffect(function(){refresh();var interval=setInterval(function(){refresh();},60*3000);return function(){return clearInterval(interval);};},[]);if(resource===null||resource===\"\"){return/*#__PURE__*/_jsx(\"h1\",{children:\"Please specify a resource!\"});}var refresh=function refresh(){var dev=false;var url=dev?\"http://10.99.12.200:9009/\":\"/\";axios.get(url+\"tracker/\"+resource).then(function(res){setParts(res.data);setLoading(false);setErr(false);setLastRefresh(new Date());}).catch(function(err){setErr(true);setLoading(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cell-label\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"cell-label-image\",src:mreLogo}),/*#__PURE__*/_jsxs(\"h1\",{className:\"cell-label-text\",children:[\"Resource: \",/*#__PURE__*/_jsx(\"b\",{children:resource})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"powered-by\",children:[/*#__PURE__*/_jsx(\"img\",{src:fe_light,className:\"powered-by-logo\"}),/*#__PURE__*/_jsx(\"p\",{className:\"powered-by-text d-inline\",children:\"Powered by FactoryEngine\"})]}),/*#__PURE__*/_jsxs(Container,{fluid:true,children:[!err?null:/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0 error-text\",children:[/*#__PURE__*/_jsx(\"img\",{src:warningImg,className:\"warning-icon\"}),/*#__PURE__*/_jsx(\"b\",{children:\"Warning: Unable to refresh data. This data may not reflect recent changes.\"}),\" \",lastRefresh===null?null:\"Last successful refresh: \"+lastRefresh.toLocaleString()]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-10 mx-auto\",children:parts.length===0?null:/*#__PURE__*/_jsxs(\"table\",{className:\"w-100\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"table-row\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-heading part-no-heading\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Part #\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"table-heading qoh-heading\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Current QOH\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"invis-heading\"}),parts[0].Quants.slice(0,7).map(function(q){var d=new Date(q.Date);var dayNames=[\"Mon\",\"Tues\",\"Wed\",\"Thurs\",\"Fri\",\"Sat\",\"Sun\"];var months=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"June\",\"July\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];var weekDay=dayNames[d.getDay()];var month=months[d.getMonth()];var dayOfMonth=d.getUTCDate();return/*#__PURE__*/_jsxs(\"th\",{className:\"qoh-heading table-heading\",children:[/*#__PURE__*/_jsx(\"b\",{children:weekDay}),\"\\xA0\",month,\"\\xA0\",dayOfMonth]});})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:parts.map(function(part){var quants=part.Quants.slice(0,7);return/*#__PURE__*/_jsxs(\"tr\",{className:\"table-row\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"pt-4 pb-4 part-no\",children:/*#__PURE__*/_jsx(\"b\",{children:part.PartNo})}),/*#__PURE__*/_jsx(\"td\",{className:\"pt-4 pb-4 cur-qoh qoh-cell\",children:/*#__PURE__*/_jsx(\"b\",{children:part.QOH})}),/*#__PURE__*/_jsx(\"td\",{className:\"invis-cell ic-bordered\"}),quants.map(function(q){return/*#__PURE__*/_jsx(\"td\",{className:\"projected-qoh qoh-cell pt-4 pb-4 \"+(q.MinQOH===null?\"no-change\":q.MinQOH>0?\"good\":\"bad\"),children:/*#__PURE__*/_jsx(\"b\",{children:q.MinQOH===null?\"\":q.MinQOH})});})]});})})]})}),!loading?null:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center\",children:/*#__PURE__*/_jsx(Loading,{})})})]})]})]});};","map":{"version":3,"names":["Container","React","useState","useEffect","testData","mreLogo","axios","warningImg","fe_light","TextPair","top","bottom","Loading","dots","setDots","interval","setInterval","curDots","length","clearInterval","App","document","title","parts","setParts","err","setErr","loading","setLoading","lastRefresh","setLastRefresh","args","window","location","href","split","resource","refresh","dev","url","get","then","res","data","Date","catch","toLocaleString","Quants","slice","map","q","d","dayNames","months","weekDay","getDay","month","getMonth","dayOfMonth","getUTCDate","part","quants","PartNo","QOH","MinQOH"],"sources":["C:/Users/joe/resourcetrack/MREResourceTracker/app/qoh/src/App.jsx"],"sourcesContent":["import './App.scss';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Container} from \"react-bootstrap\";\nimport React, {useState, useEffect} from \"react\";\nimport {testData} from \"./data\";\nimport mreLogo from \"./mre.png\";\nimport axios from \"axios\";\nimport warningImg from \"./warning.png\";\nimport fe_light from \"./fe_light.png\";\n\nconst TextPair = ({top, bottom}) => {\n  return (\n    <>\n      <p className=\"mt-0 mb-0\">\n        {top}\n      </p>\n      <p className=\"mt-0 mb-0\">\n        <b>\n          {bottom}\n        </b>\n      </p>\n    </>\n  );\n}\n\nconst Loading = () => {\n\n  const [dots, setDots] = useState(\"\");\n\n  useEffect(() => {\n    let interval = setInterval(() => {\n      setDots((curDots) => curDots.length === 5 ? \".\" : curDots + \".\");\n    }, 350);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <h1 className=\"loading-text\">Loading recent data{dots}</h1>\n  );\n}\n\nexport const App = () => {\n\n  document.title = \"Martinrea Resource Tracker\";\n\n  const [parts, setParts] = useState([]);\n  const [err, setErr] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [lastRefresh, setLastRefresh] = useState(null);\n\n  let args = window.location.href.split(\"/\");\n  let resource = args.length === 0 || args[0] === \"\" ? null : args[args.length - 1];\n\n  useEffect(() => {\n    refresh();\n\n    let interval = setInterval(() => {\n      refresh();\n    }, 60*3000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n\n  if(resource === null || resource === \"\") { \n    return <h1>Please specify a resource!</h1>\n  }\n  const refresh = () => {\n    let dev = false;\n    let url = dev ? \"http://10.99.12.200:9009/\" : \"/\"; \n    axios.get(url + \"tracker/\" + resource).then((res) => {\n        setParts(res.data);\n        setLoading(false);\n        setErr(false);\n        setLastRefresh(new Date());\n    }).catch((err) => {\n        setErr(true);\n        setLoading(false);\n    });\n  }\n\n  return (\n    <div className=\"App\">\n        <div className=\"cell-label\">\n          <img className=\"cell-label-image\" src={mreLogo} />\n          <h1 className=\"cell-label-text\">Resource: <b>{resource}</b></h1>\n        </div>\n\n        <div className=\"powered-by\">\n          <img src={fe_light} className=\"powered-by-logo\" />\n          <p className=\"powered-by-text d-inline\">\n            Powered by FactoryEngine\n          </p>\n        </div>\n\n\n        <Container fluid>\n          {!err ? null : (\n            <div className=\"error\">\n              <p className=\"mb-0 error-text\"><img src={warningImg} className=\"warning-icon\" /><b>Warning: Unable to refresh data. This data may not reflect recent changes.</b> {lastRefresh === null ? null : \"Last successful refresh: \" + lastRefresh.toLocaleString()}</p>\n            </div>\n          )}\n          <div className=\"row mt-5\">\n            <div className=\"col-10 mx-auto\">\n                  {parts.length === 0 ? null : (\n                    <table className=\"w-100\">\n                      <thead>\n                        <tr className=\"table-row\">\n                          <th className=\"table-heading part-no-heading\"><b>Part #</b></th>\n                          <th className=\"table-heading qoh-heading\"><b>Current QOH</b></th>\n                          <th className=\"invis-heading\"></th>\n                          {parts[0].Quants.slice(0, 7).map((q) => {\n                            let d = new Date(q.Date);\n                            const dayNames = [\"Mon\", \"Tues\", \"Wed\", \"Thurs\", \"Fri\", \"Sat\", \"Sun\"];\n                            const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"June\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n                            const weekDay = dayNames[d.getDay()];\n                            const month = months[d.getMonth()];\n                            const dayOfMonth = d.getUTCDate();\n\n                              return (\n                                      <th className=\"qoh-heading table-heading\"><b>{weekDay}</b>&nbsp;{month}&nbsp;{dayOfMonth}</th>\n                              );\n                          })}\n                        </tr>\n                      </thead>\n                      <tbody>\n                      {parts.map((part) => {\n                        let quants = part.Quants.slice(0, 7);\n\n                        return (\n                          <tr className=\"table-row\">\n                              <td className=\"pt-4 pb-4 part-no\">\n                                  <b>{part.PartNo}</b>\n                              </td>\n                              <td className=\"pt-4 pb-4 cur-qoh qoh-cell\">\n                                  <b>{part.QOH}</b>\n                              </td>\n                              <td className=\"invis-cell ic-bordered\"></td>\n                              {quants.map((q) => {\n                                  return (\n                                        <td className={\"projected-qoh qoh-cell pt-4 pb-4 \" + (q.MinQOH === null ? \"no-change\" : (q.MinQOH > 0 ? \"good\" : \"bad\"))}>\n                                          <b>{q.MinQOH === null ? \"\" : q.MinQOH}</b>\n                                        </td>\n                                  );\n                              })}\n                          </tr>\n                        );\n                        })}\n                      </tbody>\n                    </table>\n                  )}\n            </div>\n            {\n              !loading ? null : (\n                <div className=\"row mt-5\">\n                    <div className=\"col-12 text-center\">\n                      <Loading />\n                    </div>\n                </div>\n              )\n            }\n          </div>\n        </Container>\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}